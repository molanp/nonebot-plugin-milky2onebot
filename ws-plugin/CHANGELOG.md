# 0.7.1

* 新增ws前缀,和云崽自带前缀功能效果一致,仅适用于ws连接的Bot,在`ws-config.yaml`中配置

# 0.7.0

* 重新适配一下`GsCore`

# 0.6.13

* 增加CQ码[CQ:video]

# 0.6.12

* 新增配置项`#ws设置忽略艾特 开启`
    * 会忽略云崽自带的群聊仅艾特配置项
    * 比如全局开启了云崽仅艾特,然后`#ws设置忽略艾特 开启`之后照样会上报所有消息而不是只有艾特

# 0.6.11

* 新增指令`#ws查询`,查询数据库中的某一条数据
    * 可以查询user_id,group_id,message_id,参数用空格分开
    * `#ws查询u id=1`为查询user_id表中id为1的数据
    * `#ws查询g`为查询group_id表中最新的数据
    * `#ws查询m id=1 user_id=2`为查询message_id表中id为1并且user_id为2的数据
* 修改收到api调用的日志等级为info

# 0.6.10

* toImg增加将链接转成二维码,需要安装依赖

# 0.6.9

* 适配铃音`Lain-plugin`

# 0.6.8

* 修改指令`#ws修改id`,`#ws修改群id`的权限
    * 主人不受影响
    * 非主人时需要有QQ的协议存在才能进行绑定
    * 别名`#ws绑定`

# 0.6.7

* 新增配置项`#ws设置同步 1`
    * 数据库同步锁,设置同时可执行的数据库操作最大次数,改动此项需要重启,0为关闭同步锁

# 0.6.6

* 新增指令`#wsid`,`#ws修改id`,`#ws修改群id`
    * #wsid 用于查看当前的真实id和虚拟id
    * #ws修改id 用于修改用户的虚拟id,用法为`#ws修改id 321 qg_123`,将真实id`qg_123`的用户的虚拟id修改为`321`,不带`qg_123`则默认自己
    * #ws修改群id 用于修改群的虚拟id,用法为`#ws修改群id 123 qg_321`,将真实id`qg_321`的群的虚拟id修改为`123`,不带`qg_321`则默认本群
    * 修改仅主人可用
    * 仅用于非QQ群的其他协议,虚拟id为onebot上报的id

# 0.6.5

* 新增配置项`#ws设置渲染 100`
    * 可选值50~200，建议100。设置高精度会提高图片的精细度，但因图片较大可能会影响渲染与发送速度

# 0.6.4

* 适配`TRSS-Yunza`的`QQBot-Plugin`

# 0.6.3

* onebot v11 增加api
    * send_forward_msg 发送转发消息
    * download_file 下载文件到缓存目录

# 0.6.2

* 新增指令`#ws清除缓存`
    * 会重置数据库同步锁并删除Temp目录下的所有文件

# 0.6.1

* `#ws查看连接`更改为输出图片,增加指令`#ws状态`等同于`#ws查看连接`
    * 头像和名字显示为对应Bot,如果对应Bot未上线则为未知

# 0.6.0

* 适配`Trss-Yunzai`所有协议
    * 如果对应协议的user_id和group_id为string,则会转换成number,从1开始自增
* 可以预见的问题
    * 大多数bot获取头像为拼链接,会导致获取头像基本不可用,所以增加了一个自定义字段`avatar`,如果对应协议有获取头像接口则可以使用该字段
    * 不同协议的功能有所不同,比如获取群列表,获取陌生人信息等api可能会获取不到
    * `QQGuild`发消息需要携带五分钟以内的message_id

# 0.5.19

* 一个连接可配置多个uin
    * 方法1: 以数组的形式自行配置
    * 方法2: 对需要添加的uin再次发送`#ws添加连接`,然后输入相同的名字以及类型

# 0.5.18

* onebot v11 增加API
    * can_send_image 检查是否可以发送图片
    * can_send_record 检查是否可以发送语音

# 0.5.17

* 可以自定义每个连接的上报类型,在对应的连接中加上`messagePostFormat: 1`即可

# 0.5.16

* 略

# 0.5.15

* RedProtocol 尝试适配喵崽

# 0.5.14

* `#ws重新连接` 改为指定

# 0.5.13

* red 非win系统可以使用`#ws设置red转发2`使发送伪造消息为直接发送

# 0.5.12

* 修改red连接过程
* onebot增加快速操作api
* 尝试存储trss icqq插件发送的消息

# 0.5.11

* Chronocat 0.0.48 支持私聊导入抽卡记录等

# 0.5.10

* Chronocat响应群临时消息

# 0.5.9

* 将消息存储到数据库,默认存储7天
    * 仅支持 Miao-Yunzai & TRSS-Yunzai, Yunzai-Bot还是存储在redis
* Chronocat 0.0.47之前的版本获取群历史消息没有user_id,可能会导致获取失败,建议更新至0.0.47

# 0.5.8

* 增加一个设置项`#ws设置禁言拦截 开启/关闭`,详细请查看`#ws设置`

# 0.5.7

* 支持正向http 反向http
* 部分细节优化

# 0.5.6

* 正向ws连接支持/api /event接口

# 0.5.5

* QQNT 转发消息发送者改为固定
* 可能适配了ReadStream的file

# 0.5.4

* Chronocat 0.0.43 发送转发消息有message_id返回了

# 0.5.3

* 支持了TRSS-Yunzai 的 ICQQ-Plugin
    * 目前 TRSS-Yunzai 的可用协议为
        * GenshinUID Core 全部协议均可使用
        * onebot 仅支持 QQNT 以及 ICQQ

# 0.5.2

* QQNT 拦截配置项中没有uin的连接
    * uin为需要连接的账号
* 优化添加连接之后的提示词

# 0.5.1

* QQNT 将嵌套转发消息改成不嵌套
    * 暂时不支持嵌套转发

# 0.5.0

* 重构一下QQNT相关的代码
* 优化一下onebotApi相关的代码
    * 之后可能会用得上
* QQNT支持正向和反向ws连接,需要对QQNT连接的账号发送#ws添加连接
* QQNT增加群禁言,全体禁言,踢群
    * 如果QQNT不在前台且焦点不在指定的群,获取的群成员列表可能为空
    * 如果为空的话则只会获取启动机器人之后在群内发送过消息的人
* QQNT修复使用Chronocat0.0.42时的某些bug
* QQNT增加请求Api超时输出日志

# 0.4.20

* QQNT 简单支持一下文字的转发消息,(图片会把消息发给自己然后撤回取直链)
    * 需要更新Chronocat 0.0.40
    * 需要64位QQNT,如果不是64位不能伪造转发消息
    * 机器人所在的QQNT看不了发送的转发消息
    * 发送转发消息之前至少要有一条消息
    * 转发消息目前不能主动撤回

# 0.4.19

* QQNT 增加获取群历史消息
    * 因为回复消息没有msgId,所以将seq存在redis获取对应的msgId,默认存储10分钟
* QQNT 优化使用TRSS脚本自动获取Token

# 0.4.18

* QQNT 增加发送视频 需要ffmpeg

# 0.4.17

* QQNT 增加发送文件

# 0.4.16

* QQNT 发送语音修改为使用ffmpeg,请自行配置ffmpeg,否则可能无法发送语音
    * 更新后需要重新安装依赖 pnpm install --filter=ws-plugin

# 0.4.15

* QQNT 优化进群通知,增加禁言通知

# 0.4.14

* 增加 TRSS-Yunzai 连接 gsuid_core
* 优化CQ:node

# 0.4.13

* QQNT 增加发送回复消息
    * 回复会默认带一个 `@`

# 0.4.12

* QQNT 若不填Token则自动获取Token

# 0.4.11

* QQNT 增加发送语音,小表情
    * 语音只有手机上能听

# 0.4.10

* QQNT 增加入群通知

# 0.4.9

* QQNT 增加主动撤回消息

# 0.4.8

* 优化`#ws添加连接`

# 0.4.7

* 增加 TRSS-Yunzai 连接 QQNT

# 0.4.6

* 增加白名单

# 0.4.5

* 优化代码

# 0.4.4

* 增加api
    * get_essence_msg_list 获取精华消息列表
    * _get_group_notice 获取群公告

# 0.4.3

* 增加匿名以及群匿名用户禁言API

# 0.4.2

* 增加设置项`#ws设置全部 开启/关闭` 一键操作所有设置项

# 0.4.1

* 优化存储消息,其他插件使用e.reply时也能存储,防止get_msg报错

# 0.4.0

* 适配锅巴
* 增加大部分api
* 增加请求上报
* 增加`#ws更新日志`

# 0.3.12

* 修复更换为Bot.on之后仅at不生效的问题
* 增加可单独禁用群聊
    * `#ws禁用群123456` 不带群号则默认为当前群
    * `#ws启用群123456` 不带群号则默认为当前群
    * `#ws查看禁用群`
    * 详细可查看`#ws帮助`

# 0.3.11

* 新增CQ码[CQ:music] 音乐自定义分享 Copyright xiaofei-plugin

# 0.3.10

* 修改message_id存储于redis
* 增加设置项`#ws设置存储600`
* 增加对message_id为null的判断
* 获取消息仅针对`用户发送`以及`ws-plugin插件发送`,如果是其他插件发送的消息会获取不到

# 0.3.9

* 修改为Bot.on
* 删除设置项`#ws设置优先级`

# 0.3.8

* 修复前缀判断时错误的匹配e.msg的问题
* 反向ws连接添加缺少的请求头X-Client-Role

# 0.3.7

* 增加api
    * get_group_root_files 获取群根目录文件列表
    * get_group_files_by_folder 获取群子目录文件列表
    * get_group_file_url 获取群文件资源链接

# 0.3.6

* 增加CQ码[CQ:record] 语音

# 0.3.5

* 增加发送消息成功后的日志输出
* 适配根据歌曲id分享音乐

# 0.3.4

* 可能修复了连接失败时关闭和删除连接无效的bug
* 增加一个设置项`#ws设置优先级1` 设置完重启后生效
* 增加了几个bug

# 0.3.3

* 增加CQ码[CQ:face] QQ表情

# 0.3.2

* 重新开放一下正向ws连接

# 0.3.1

* 增加指令`#ws帮助` Copyright miao-plugin

# 0.3.0

* 增加指令`#ws关闭连接``#ws打开连接``#ws查看连接`
    *`#ws关闭连接` 不会删除已有连接,同时不进行连接
    *`#ws打开连接` 打开已关闭的连接
    *`#ws查看连接` 查看已有的所有连接名字和状态
    *`#ws添加连接` 添加一个新的连接 
    *`#ws删除连接` 删除一个已有的连接 
    *`#ws重新连接` 强制断开已有的所有连接并重新连接 
* 暂时关闭正向ws连接

# 0.2.0

* 增加通知事件上报,默认关闭,需要可自行使用`#ws设置`进行开启
    * 增加以下通知事件
    * 群管理员变动,群成员减少,群成员增加
    * 群禁言,好友添加,群消息撤回
    * 好友消息撤回,群内戳一戳

# 0.1.0

* 增加指令`#ws版本``#ws设置` Copyright miao-plugin

# 0.0.5

* 增加指令`#ws重新连接`
* 增加首次连接时将结果通知主人设置

# 0.0.4

* 增加断线自动重新连接
* 增加断线和重连通知主人设置

# 0.0.3

* 适配gsuid群聊导出抽卡记录和私聊发送抽卡记录json文件

# 0.0.2

* 增加指令`#ws添加连接``#ws删除连接`

# 0.0.1

* 初始化插件
* 可连接支持onebotv11协议的bot以及gsuid_core
* 适配了部分onebot api
  
